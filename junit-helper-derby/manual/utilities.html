
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 11 Jan 2016
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>User Guide :: Utilities | JUnit Helper :: Derby</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="../..//css/bootswatch.css" rel="stylesheet" />
		<link href="../..//css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="../..//css/lightbox.css" rel="stylesheet" />

		<link href="../..//css/site.css" rel="stylesheet" />
		<link href="../..//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="author" href="http://blog.bindul.name/"/>
	</head>

	<body class="page-manual-utilities project-junit-helper-derby" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="../../"><span class="color-highlight">JUnit Helper</span> Utils</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="../../../" title="Development Entropy">Development Entropy</a></li>
							<li ><a href="https://github.com/deventropy/junit-helper" title="JUnit Helper @ GitHub" class="externalLink">JUnit Helper @ GitHub</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="JUnit Helper :: Derby">JUnit Helper :: Derby</a></li>
									<li ><a href="../../junit-helper-utils/index.html" title="JUnit Helper :: Shared Utils">JUnit Helper :: Shared Utils</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Junit Helper Derby <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="Home">Home</a></li>
									<li class="dropdown-submenu ">
										<a href="index.html" title="User Manual">User Manual</a>
										<ul class="dropdown-menu">
											<li ><a href="configuration.html" title="Configuration">Configuration</a></li>
											<li class="active"><a href="" title="Script Runner / Utilities">Script Runner / Utilities</a></li>
											<li ><a href="concurrency.html" title="Parallel Runs">Parallel Runs</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Development <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../../development.html" title="Development Guide">Development Guide</a></li>
									<li ><a href="https://github.com/deventropy/junit-helper/issues" title="Issues" class="externalLink">Issues</a></li>
									<li ><a href="https://github.com/deventropy/junit-helper#fork-destination-box" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
									<li ><a href="https://travis-ci.org/deventropy/junit-helper" title="Continuous Integration" class="externalLink">Continuous Integration</a></li>
									<li ><a href="https://www.deventropy.org/" title="Development Entropy" class="externalLink">Development Entropy</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../" id="bannerLeft"><h1><span class="color-highlight">Derby</span> JUnit Helper Utils</h1></a>
					<p class="lead">Utility JUnit resource / libraries to ease DB testing with Apache Derby</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../../" title="JUnit Helper">JUnit Helper</a></li>
				<li class="divider">/</li>
				<li><a href="../" title="JUnit Helper :: Derby">JUnit Helper :: Derby</a></li>
				<li class="divider">/</li>
				<li>User Guide :: Utilities</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<!-- Copyright 2016 JUnit Helper Contributors

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. --> 
<p><a href="./index.html">â†« User Guide Home</a></p> 
<div class="page-header">
 <h1 id="user_guide__utilities">User Guide :: Utilities</h1>
</div> 
<p>The library comes with some utilities which may be used in your test code. However, these classes are <i>not</i> considered part of the public API of the library and they may change without notice even between minor releases.</p> 
<div class="section"> 
 <h2 id="Script_Runner"><a name="script-runner"></a>Script Runner</h2> 
 <p><tt>org.deventropy.junithelper.derby.DerbyScriptRunner</tt> may be used to execute a SQL script against a Derby database (the database need not be created or managed by this library). The utility internally uses the Derby <a class="externalLink" href="http://db.apache.org/derby/docs/10.12/tools/ctoolsij34525.html">ij</a> tool to execute the scripts.</p> 
 <p>An instance of this utility is expected to be used against a single connection; and the connection is a required parameter when creating a new instance.</p> 
 <p>The following snippet shows a use of this utility to execute a script:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>final DerbyScriptRunner scriptRunner = new DerbyScriptRunner(connection);

// Streams to be used for logging
final StringWriter logData1 = new StringWriter();
final WriterOutputStream wos1 = new WriterOutputStream(logData1, Charset.defaultCharset());
final StringWriter logData2 = new StringWriter();
final WriterOutputStream wos2 = new WriterOutputStream(logData2, Charset.defaultCharset());

// Set the default log stream
scriptRunner.setDefaultScriptLogStream(wos1);

// The result of the following will go to logData2
scriptRunner.executeScript(&quot;classpath:/org/deventropy/junithelper/derby/memory/simple01/ddl.sql&quot;,
	wos2, false);

// The result of the following will go to logData1 - the default
scriptRunner.executeScript(&quot;classpath:/org/deventropy/junithelper/derby/memory/simple01/dml.sql&quot;);
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Character_Set">Character Set</h3> 
  <p>At this time the utility only supports a single character set for reading the <tt>SQL</tt> scripts as well as for writing the log file. This may be set in the constructor of the class. If not specified, the system default character set is used.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Logging">Logging</h3> 
  <p>The utility supports logging the results of the script execution either at a script level (using <tt>#executeScript(String, File)</tt> or <tt>#executeScript(String, OutputStream, boolean)</tt> method) either to a file or to an <tt>OutputStream</tt>.</p> 
  <p>The utility does have a default log stream, which is used when scripts are invoked using the <tt>#executeScript(String)</tt> method. The default log stream may be set using the <tt>#setDefaultScriptLogStream(OutputStream)</tt> method, and until set, is initialized with <tt>DerbyUtils#DEV_NULL</tt> stream, which simply discards all log entries.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Scripts">Scripts</h3> 
  <p>Scripts sent to this utility should be identified as resources in a format supported by <a href="../../junit-helper-utils/apidocs/org/deventropy/junithelper/utils?UrlResourceUtil.html">UrlResourceUtil</a>.</p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Derby_Utils"><a name="derby-utils"></a>Derby Utils</h2> 
 <p>This class provides some random utilities:</p> 
 <div class="section"> 
  <h3 id="DEV_NULL">DEV_NULL</h3> 
  <p>This is an <tt>OutputStream</tt> that can discard anything written to it. It is the equivalent of writing anything to the <tt>/dev/null</tt> device on a *nix system.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Close_Quitely">Close Quitely</h3> 
  <p>The <tt>#closeQuietly(java.lang.AutoCloseable)</tt> tries to close any non-null objects like <tt>Statement</tt>, <tt>Connection</tt>, <tt>ResultSet</tt>, etc. ignoring any exceptions generated on the way.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Shut_down_Derby_System_Quitely">Shut down Derby System Quitely</h3> 
  <p>Shuts down the derby system so it can be reloaded; per Derby developer guide. For more information see <a class="externalLink" href="https://db.apache.org/derby/docs/10.12/devguide/tdevdvlp20349.html">Derby System</a>. This method also ignores any exception generated (which always is).</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#user_guide__utilities" title="User Guide :: Utilities">User Guide :: Utilities <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li class="dropdown"><a href="#Script_Runner" title="Script Runner">Script Runner <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Character_Set" title="Character Set">Character Set</a>
		<li><a href="#Logging" title="Logging">Logging</a>
		<li><a href="#Scripts" title="Scripts">Scripts</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Derby_Utils" title="Derby Utils">Derby Utils <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#DEV_NULL" title="DEV_NULL">DEV_NULL</a>
		<li><a href="#Close_Quitely" title="Close Quitely">Close Quitely</a>
		<li><a href="#Shut_down_Derby_System_Quitely" title="Shut down Derby System Quitely">Shut down Derby System Quitely</a>
				<li class="divider"></li>
			</ul>
		</li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../../" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/deventropy/junit-helper" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li class="nav-header">Junit Helper Derby</li>
						<li >
							<a href="../index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="index.html" title="User Manual">User Manual <i class="icon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li >
							<a href="configuration.html" title="Configuration">Configuration</a>
						</li>
						<li class="active">
							<a href="#" title="Script Runner / Utilities">Script Runner / Utilities</a>
						</li>
						<li >
							<a href="concurrency.html" title="Parallel Runs">Parallel Runs</a>
						</li>
							</ul>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Modules</li>
						<li >
							<a href="../index.html" title="JUnit Helper :: Derby">JUnit Helper :: Derby</a>
						</li>
						<li >
							<a href="../../junit-helper-utils/index.html" title="JUnit Helper :: Shared Utils">JUnit Helper :: Shared Utils</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../../development.html" title="Development Guide">Development Guide</a>
						</li>
						<li >
							<a href="https://github.com/deventropy/junit-helper/issues" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/deventropy/junit-helper#fork-destination-box" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li >
							<a href="https://travis-ci.org/deventropy/junit-helper" title="Continuous Integration" class="externalLink">Continuous Integration</a>
						</li>
						<li >
							<a href="https://www.deventropy.org/" title="Development Entropy" class="externalLink">Development Entropy</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Legal</li>
						<li >
							<a href="../../license.html" title="License">License</a>
						</li>
						<li >
							<a href="../../privacy.html" title="Privacy Policy">Privacy Policy</a>
						</li>
						<li class="nav-header">Maven documentation</li>
						<li >
							<a href="../project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="../project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><span class="color-highlight">JUnit Helper</span> Utils is a collection of (mostly) External Resources
		          built for <a href="http://junit.org/" title="JUnit">JUnit</a>. They aid in developing test cases using
		          external resources, like databases, HTTP servers, etc.</blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015-2016 <a href="http://www.deventropy.org/">Development Entropy Projects</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.0-alpha.1-SNAPSHOT. </span><span class="publishDate">Last Published: 11 Jan 2016. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="../..//js/lightbox.min.js"></script>
	<script src="../..//js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="../..//js/reflow-skin.js"></script>

	</body>
</html>
